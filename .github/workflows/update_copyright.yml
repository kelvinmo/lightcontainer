name: Update copyright

on:
  schedule:
    - cron: "0 3 1 1 *"
  workflow_dispatch:

jobs:
  update-copyright:
    name: Update copyright
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Update copyright
        uses: FantasticFiasco/action-update-license-year@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          path: |
            COPYING
            src/**/*.php
          transform: (?<=Copyright \(C\) Kelvin Mo )(?<from>\d{4})?-?(\d{4})?
          branchName: update-copyright/update-{{currentYear}}
          commitTitle: Update copyright year
          prTitle: Update copyright year
          prBody: |
            Update copyright year
            
            - Auto-generated by [action-update-license-year][1]

            [1]: https://github.com/FantasticFiasco/action-update-license-year
